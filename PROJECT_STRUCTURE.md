# AIMovieMaker é¡¹ç›®ç»“æ„

> ğŸ“… æ›´æ–°æ—¶é—´: 2025-11-27
> ğŸ”„ é‡æ„å®Œæˆåçš„æœ€æ–°æ¶æ„

## ğŸ“ ç›®å½•ç»“æ„

```
AIMovieMaker/
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.ts        # Tailwind CSS é…ç½®
â”‚   â”œâ”€â”€ vercel.json               # Vercel éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ .env.local                # ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤ï¼‰
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ CLAUDE.md                 # AI åŠ©æ‰‹é…ç½®
â”‚   â”œâ”€â”€ GEMINI.md                 # Gemini AI é…ç½®
â”‚   â”œâ”€â”€ CHANGELOG.md              # æ›´æ–°æ—¥å¿—
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md      # é¡¹ç›®ç»“æ„ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ INVITATION_SYSTEM_GUIDE.md # é‚€è¯·ç³»ç»ŸæŒ‡å—
â”‚   â”œâ”€â”€ SUPABASE_SETUP.md         # Supabase è®¾ç½®ï¼ˆè‹±æ–‡ï¼‰
â”‚   â”œâ”€â”€ SUPABASE_SETUP_CN.md      # Supabase è®¾ç½®ï¼ˆä¸­æ–‡ï¼‰
â”‚   â””â”€â”€ docs/                     # è¯¦ç»†æ–‡æ¡£ç›®å½•
â”‚       â”œâ”€â”€ REFACTORING_GUIDE.md  # é‡æ„æŒ‡å—ï¼ˆæ ¸å¿ƒï¼‰
â”‚       â”œâ”€â”€ TODO.md               # å¾…åŠäº‹é¡¹
â”‚       â”œâ”€â”€ activation-system.md  # æ¿€æ´»ç³»ç»Ÿ
â”‚       â””â”€â”€ ...                   # å…¶ä»– API æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ¨ app/                       # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µ
â”‚   â”œâ”€â”€ globals.css               # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ canvas/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ç”»å¸ƒé¡µé¢
â”‚   â”‚   â””â”€â”€ project/[projectId]/
â”‚   â”‚       â””â”€â”€ page.tsx          # é¡¹ç›®ç”»å¸ƒé¡µé¢
â”‚   â””â”€â”€ api/                      # API è·¯ç”±
â”‚       â”œâ”€â”€ activation/           # æ¿€æ´»ç›¸å…³
â”‚       â”œâ”€â”€ blob/                 # Blob å­˜å‚¨
â”‚       â”œâ”€â”€ flow/                 # Flow API
â”‚       â”‚   â”œâ”€â”€ generate/         # å›¾ç‰‡ç”Ÿæˆ
â”‚       â”‚   â”œâ”€â”€ upload/           # ä¸Šä¼ 
â”‚       â”‚   â”œâ”€â”€ video/            # è§†é¢‘ç”Ÿæˆ
â”‚       â”‚   â”‚   â”œâ”€â”€ generate/     # æ–‡/å›¾ç”Ÿè§†é¢‘
â”‚       â”‚   â”‚   â”œâ”€â”€ start-end/    # é¦–å°¾å¸§è§†é¢‘
â”‚       â”‚   â”‚   â”œâ”€â”€ status/       # çŠ¶æ€æŸ¥è¯¢
â”‚       â”‚   â”‚   â””â”€â”€ upsample/     # è¶…æ¸…æ”¾å¤§
â”‚       â”‚   â”œâ”€â”€ media/            # åª’ä½“è·å–
â”‚       â”‚   â”œâ”€â”€ projects/         # é¡¹ç›®ç®¡ç†
â”‚       â”‚   â””â”€â”€ workflows/        # å·¥ä½œæµ
â”‚       â”œâ”€â”€ user/                 # ç”¨æˆ·ç›¸å…³
â”‚       â””â”€â”€ whisk/                # Whisk API
â”‚           â”œâ”€â”€ caption/          # å›¾ç‰‡æè¿°
â”‚           â”œâ”€â”€ edit/             # å›¾ç‰‡ç¼–è¾‘
â”‚           â”œâ”€â”€ generate/         # å›¾ç‰‡ç”Ÿæˆ
â”‚           â”œâ”€â”€ recipe/           # å¤šå›¾èåˆ
â”‚           â””â”€â”€ upload/           # ä¸Šä¼ 
â”‚
â”œâ”€â”€ ğŸ§© components/                # React ç»„ä»¶
â”‚   â”œâ”€â”€ Canvas.tsx                # æ ¸å¿ƒç”»å¸ƒç»„ä»¶ (2422 è¡Œ)
â”‚   â”œâ”€â”€ Toolbar.tsx               # å·¥å…·æ 
â”‚   â”œâ”€â”€ RightToolbar.tsx          # å³ä¾§å·¥å…·æ 
â”‚   â”œâ”€â”€ SelectionToolbar.tsx      # é€‰ä¸­å·¥å…·æ 
â”‚   â”œâ”€â”€ AIInputPanel.tsx          # AI è¾“å…¥é¢æ¿
â”‚   â”œâ”€â”€ MaterialsPanel.tsx        # ç´ æé¢æ¿
â”‚   â”œâ”€â”€ SettingsPanel.tsx         # è®¾ç½®é¢æ¿
â”‚   â”œâ”€â”€ Header.tsx                # é¡¶éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ CanvasNavigation.tsx      # ç”»å¸ƒå¯¼èˆª
â”‚   â”œâ”€â”€ nodes/                    # èŠ‚ç‚¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ImageNode.tsx         # å›¾ç‰‡èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ VideoNode.tsx         # è§†é¢‘èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ TextNode.tsx          # æ–‡æœ¬èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ NoteNode.tsx          # ç¬”è®°èŠ‚ç‚¹
â”‚   â”‚   â””â”€â”€ ToolbarButton.tsx     # å·¥å…·æŒ‰é’®
â”‚   â”œâ”€â”€ canvas/                   # ç”»å¸ƒå­ç»„ä»¶
â”‚   â”‚   â””â”€â”€ connection-menu/      # è¿çº¿èœå•
â”‚   â”‚       â”œâ”€â”€ ConnectionMenuRoot.tsx
â”‚   â”‚       â”œâ”€â”€ ImageSubmenu.tsx
â”‚   â”‚       â”œâ”€â”€ VideoSubmenu.tsx
â”‚   â”‚       â”œâ”€â”€ CameraControlSubmenu.tsx
â”‚   â”‚       â”œâ”€â”€ ImagePromptInput.tsx
â”‚   â”‚       â””â”€â”€ ExtendVideoInput.tsx
â”‚   â”œâ”€â”€ å¼¹çª—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginModal.tsx
â”‚   â”‚   â”œâ”€â”€ SettingsPanel.tsx
â”‚   â”‚   â”œâ”€â”€ ImageCropperModal.tsx
â”‚   â”‚   â”œâ”€â”€ ImageAnnotatorModal.tsx
â”‚   â”‚   â”œâ”€â”€ VisionAnalysisModal.tsx
â”‚   â”‚   â”œâ”€â”€ VideoFrameExtractorModal.tsx
â”‚   â”‚   â”œâ”€â”€ PrefixPromptModal.tsx
â”‚   â”‚   â”œâ”€â”€ InvitationModal.tsx
â”‚   â”‚   â”œâ”€â”€ CreateProjectModal.tsx
â”‚   â”‚   â””â”€â”€ ConfirmDialog.tsx
â”‚   â””â”€â”€ å…¶ä»–ç»„ä»¶
â”‚       â”œâ”€â”€ LandingPage.tsx
â”‚       â”œâ”€â”€ DashboardView.tsx
â”‚       â”œâ”€â”€ ProjectsHome.tsx
â”‚       â”œâ”€â”€ ProjectCard.tsx
â”‚       â”œâ”€â”€ GrokAssistantPanel.tsx
â”‚       â”œâ”€â”€ PromptLibraryPanel.tsx
â”‚       â”œâ”€â”€ ThemeToggle.tsx
â”‚       â””â”€â”€ ParticleField.tsx
â”‚
â”œâ”€â”€ ğŸ”§ lib/                       # æ ¸å¿ƒåº“ï¼ˆé‡æ„åï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“¦ config/                # é…ç½®å±‚
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ tier-config.ts        # å¥—é¤é…ç½®é€‚é…å™¨ (537 è¡Œ)
â”‚   â”‚                             # - Pro/Ultra å·®å¼‚ç»Ÿä¸€ç®¡ç†
â”‚   â”‚                             # - è§†é¢‘æ¨¡å‹é€‰æ‹©
â”‚   â”‚                             # - PaygateTier é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ› ï¸ services/              # ä¸šåŠ¡æœåŠ¡å±‚ (1570 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ prompt-builder.service.ts    # æç¤ºè¯æ„å»º (138 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ video-polling.service.ts     # è§†é¢‘è½®è¯¢ (156 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ image-generation.service.ts  # å›¾ç‰‡ç”Ÿæˆ (269 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ video-generation.service.ts  # è§†é¢‘ç”Ÿæˆ (382 è¡Œ)
â”‚   â”‚   â””â”€â”€ node-management.service.ts   # èŠ‚ç‚¹ç®¡ç† (606 è¡Œ)
â”‚   â”‚                                    # - ç»Ÿä¸€èŠ‚ç‚¹åˆ›å»º
â”‚   â”‚                                    # - Placeholder ç®¡ç†
â”‚   â”‚                                    # - ä½ç½®è®¡ç®—
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”Œ tools/                 # å·¥å…·å±‚ï¼ˆçº¯ API è°ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ image-api.ts          # å›¾ç‰‡ API
â”‚   â”‚   â”œâ”€â”€ video-api.ts          # è§†é¢‘ API
â”‚   â”‚   â””â”€â”€ vision-api.ts         # è§†è§‰åˆ†æ API
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“Š constants/             # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ node-sizes.ts         # èŠ‚ç‚¹å°ºå¯¸
â”‚   â”‚                             # - detectAspectRatio()
â”‚   â”‚                             # - getImageNodeSize()
â”‚   â”‚                             # - getVideoNodeSize()
â”‚   â”‚
â”‚   â”œâ”€â”€ ä¸šåŠ¡å…¥å£
â”‚   â”‚   â”œâ”€â”€ api-mock.ts           # ä¸šåŠ¡ API æ¥å£ (1174 è¡Œ)
â”‚   â”‚   â”œâ”€â”€ direct-google-api.ts  # ç›´æ¥ Google API (946 è¡Œ)
â”‚   â”‚   â””â”€â”€ input-panel-generator.ts # è¾“å…¥é¢æ¿ç”Ÿæˆ (403 è¡Œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ store.ts              # Zustand ä¸» Store
â”‚   â”‚   â”œâ”€â”€ materials-store.ts    # ç´ æ Store
â”‚   â”‚   â””â”€â”€ theme-store.ts        # ä¸»é¢˜ Store
â”‚   â”‚
â”‚   â”œâ”€â”€ ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ types.ts              # æ ¸å¿ƒç±»å‹
â”‚   â”‚   â”œâ”€â”€ types-materials.ts    # ç´ æç±»å‹
â”‚   â”‚   â””â”€â”€ types-prompt-library.ts # æç¤ºè¯åº“ç±»å‹
â”‚   â”‚
â”‚   â””â”€â”€ å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ image-utils.ts        # å›¾ç‰‡å·¥å…·
â”‚       â”œâ”€â”€ api-route-helpers.ts  # API è·¯ç”±å·¥å…·
â”‚       â”œâ”€â”€ proxy-agent.ts        # ä»£ç†é…ç½®
â”‚       â”œâ”€â”€ get-user-credentials.ts # ç”¨æˆ·å‡­è¯
â”‚       â”œâ”€â”€ materials-service.ts  # ç´ ææœåŠ¡
â”‚       â”œâ”€â”€ project-materials.ts  # é¡¹ç›®ç´ æ
â”‚       â”œâ”€â”€ prompt-service.ts     # æç¤ºè¯æœåŠ¡ï¼ˆå¾…å¯ç”¨ï¼‰
â”‚       â””â”€â”€ supabaseClient.ts     # Supabase å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ ğŸª hooks/                     # React Hooks
â”‚   â””â”€â”€ canvas/                   # ç”»å¸ƒç›¸å…³ Hooks
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ useConnectionMenu.ts  # è¿çº¿èœå•çŠ¶æ€
â”‚       â”œâ”€â”€ useTextToImage.ts     # æ–‡ç”Ÿå›¾
â”‚       â”œâ”€â”€ useImageToImage.ts    # å›¾ç”Ÿå›¾
â”‚       â”œâ”€â”€ useImageOperations.ts # å›¾ç‰‡æ“ä½œ (180 è¡Œ)
â”‚       â”œâ”€â”€ useVideoOperations.ts # è§†é¢‘æ“ä½œ (150 è¡Œ)
â”‚       â””â”€â”€ useNodeOperations.ts  # èŠ‚ç‚¹æ“ä½œ (120 è¡Œ)
â”‚
â”œâ”€â”€ ğŸ“ types/                     # å…¨å±€ç±»å‹
â”‚   â”œâ”€â”€ connection-menu.ts        # è¿çº¿èœå•ç±»å‹
â”‚   â”œâ”€â”€ image-generation.ts       # å›¾ç‰‡ç”Ÿæˆç±»å‹
â”‚   â””â”€â”€ morpheus.ts               # Morpheus ç±»å‹
â”‚
â””â”€â”€ ğŸ”Œ grok-cookie-extractor/     # Chrome æ‰©å±•
    â”œâ”€â”€ manifest.json
    â”œâ”€â”€ README.md
    â””â”€â”€ ...
```

## ğŸ—ï¸ æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        UI å±‚ (Presentation)                       â”‚
â”‚  components/nodes/   - çº¯ UI æ¸²æŸ“                                 â”‚
â”‚  hooks/canvas/       - ç”¨æˆ·äº¤äº’å¤„ç†                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        ä¸šåŠ¡æœåŠ¡å±‚ (Services)                       â”‚
â”‚  lib/services/       - ä¸šåŠ¡é€»è¾‘å¤„ç†                               â”‚
â”‚  lib/config/         - é…ç½®ç®¡ç†ï¼ˆPro/Ultra å·®å¼‚ï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        å·¥å…·å±‚ (Tools)                             â”‚
â”‚  lib/tools/          - çº¯ API è°ƒç”¨ï¼Œæ— ä¸šåŠ¡é€»è¾‘                     â”‚
â”‚  lib/direct-google-api.ts - Google API ç›´æ¥è°ƒç”¨                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ ä»£ç ç»Ÿè®¡

| å±‚çº§ | æ–‡ä»¶æ•° | æ€»è¡Œæ•° | è¯´æ˜ |
|------|--------|--------|------|
| é…ç½®å±‚ | 2 | ~550 | Pro/Ultra å·®å¼‚é›†ä¸­ç®¡ç† |
| æœåŠ¡å±‚ | 6 | ~1570 | ä¸šåŠ¡é€»è¾‘ç»Ÿä¸€ |
| å·¥å…·å±‚ | 4 | ~400 | çº¯ API è°ƒç”¨ |
| Hooks | 7 | ~700 | UI äº¤äº’é€»è¾‘ |
| **æ€»è®¡** | 19 | ~3220 | æ–°å¢æŠ½è±¡å±‚ |

## ğŸ”— å…³é”®ä¾èµ–å…³ç³»

```
UI ç»„ä»¶
   â†“
hooks/canvas/*          â†’ ç”¨æˆ·äº¤äº’
   â†“
lib/services/*          â†’ ä¸šåŠ¡é€»è¾‘
   â†“
lib/config/tier-config  â†’ å¥—é¤é…ç½®
   â†“
lib/tools/*             â†’ API è°ƒç”¨
   â†“
lib/direct-google-api   â†’ Google API
```

## ğŸ“ é‡è¦æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¡Œæ•° | èŒè´£ |
|------|------|------|
| `Canvas.tsx` | 2422 | æ ¸å¿ƒç”»å¸ƒï¼ŒReact Flow é›†æˆ |
| `api-mock.ts` | 1174 | ä¸šåŠ¡ API å…¥å£ |
| `direct-google-api.ts` | 946 | Google API ç›´æ¥è°ƒç”¨ |
| `node-management.service.ts` | 606 | èŠ‚ç‚¹åˆ›å»º/ç®¡ç†ç»Ÿä¸€ |
| `tier-config.ts` | 537 | Pro/Ultra é…ç½®é€‚é…å™¨ |

